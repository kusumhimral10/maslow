"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[8245],{88719:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(23917);const a={getAllNodes:()=>i.Z.get("/nodes"),getSpecificNode:e=>i.Z.get("/nodes/".concat(e)),executeCustomFunctionNode:e=>i.Z.post("/node-custom-function",e)}},74404:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(23917);const a={getAllTools:()=>i.Z.get("/tools"),getSpecificTool:e=>i.Z.get("/tools/".concat(e)),createNewTool:e=>i.Z.post("/tools",e),updateTool:(e,t)=>i.Z.put("/tools/".concat(e),t),deleteTool:e=>i.Z.delete("/tools/".concat(e))}},27341:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(15749),a=n(69405),o=n(30969),l=n(48886),s=n(87130),r=n(42558),d=n.n(r),c=n(5107),p=n(2383),u=n(37574);const h=e=>{let{show:t,dialogProps:n,onCancel:r}=e;const h=document.getElementById("portal"),m=(0,a.I0)(),[x,g]=(0,o.useState)([]),[j,v]=(0,o.useState)({});(0,o.useEffect)((()=>(n.inputParams&&g(n.inputParams),n.data&&v(n.data),()=>{g([]),v({})})),[n]),(0,o.useEffect)((()=>(m(t?{type:p.tS}:{type:p.Go}),()=>m({type:p.Go}))),[t,m]);const y=t?(0,u.jsx)(l.Z,{onClose:r,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,u.jsx)(s.Z,{children:(0,u.jsx)(d(),{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:x.map(((e,t)=>(0,u.jsx)(c.Z,{disabled:n.disabled,inputParam:e,data:j,isAdditionalParams:!0},t)))})})}):null;return(0,i.createPortal)(y,h)}},73081:(e,t,n)=>{n.d(t,{p:()=>c});var i=n(89089),a=n(45317),o=n(64139),l=n(32604),s=n(13195),r=n(87038),d=n(37574);const c=e=>{let{value:t,height:n,theme:c,lang:p,placeholder:u,disabled:h=!1,basicSetup:m={},onValueChange:x}=e;const g=r.tk.baseTheme({"&":{color:"#191b1f",padding:"10px"},".cm-placeholder":{color:"rgba(120, 120, 120, 0.5)"}});return(0,d.jsx)(i.ZP,{placeholder:u,value:t,height:null!==n&&void 0!==n?n:"calc(100vh - 220px)",theme:"dark"===c?"js"===p?l.Pc:s.CP:"none",extensions:"js"===p?[(0,a.eJ)({jsx:!0}),r.tk.lineWrapping,g]:[(0,o.AV)(),r.tk.lineWrapping,g],onChange:x,readOnly:h,editable:!h,basicSetup:m})}},62602:(e,t,n)=>{n.d(t,{d:()=>m});var i=n(49009),a=n(30969),o=n(51267),l=n(57537),s=n(43108),r=n(91243),d=n(35531),c=n(47915),p=n(94702),u=n(37574);const h={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},m=(0,a.memo)((e=>{var t;let{language:n,chatflowid:m,isDialog:x,value:g}=e;const j=(0,p.Z)(),[v,y]=(0,a.useState)(null),f=Boolean(v),b=()=>{y(null)};return(0,u.jsxs)("div",{style:{width:x?"":300},children:[(0,u.jsx)(s.Z,{sx:{color:"white",background:null===(t=j.palette)||void 0===t?void 0:t.common.dark,p:1,borderTopLeftRadius:10,borderTopRightRadius:10},children:(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[n,(0,u.jsx)("div",{style:{flex:1}}),(0,u.jsx)(r.Z,{size:"small",title:"Copy",color:"success",onClick:e=>{navigator.clipboard&&navigator.clipboard.writeText&&(navigator.clipboard.writeText(g),y(e.currentTarget),setTimeout((()=>{b()}),1500))},children:(0,u.jsx)(i.Rx8,{})}),(0,u.jsx)(d.ZP,{open:f,anchorEl:v,onClose:b,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,u.jsx)(c.Z,{variant:"h6",sx:{pl:1,pr:1,color:"white",background:j.palette.success.dark},children:"Copied!"})}),(0,u.jsx)(r.Z,{size:"small",title:"Download",color:"primary",onClick:()=>{const e=h[n]||".file",t="file-".concat(m).concat(e);if(!t)return;const i=new Blob([g],{type:"text/plain"}),a=URL.createObjectURL(i),o=document.createElement("a");o.download=t,o.href=a,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},children:(0,u.jsx)(i.DjJ,{})})]})}),(0,u.jsx)(o.Z,{language:n,style:l.Z,customStyle:{margin:0},children:g})]})}));m.displayName="CodeBlock"},80598:(e,t,n)=>{n.d(t,{s:()=>o});var i=n(30969),a=n(31986);const o=(0,i.memo)(a.D,((e,t)=>e.children===t.children))},5107:(e,t,n)=>{n.d(t,{Z:()=>Le});var i=n(48428),a=n(30969),o=n(69405),l=n(45971),s=n(94702),r=n(6779),d=n(43108),c=n(47915),p=n(46138),u=n(91243),h=n(62433),m=n(2295),x=n(49009),g=n(34061),j=n(95550),v=n(7276),y=n(38760),f=n(44850),b=n(40894),Z=n(10814),w=n(50576),C=n(86115),T=n(37574);const k=e=>{var t;let{columns:n,rows:i,style:o,disabled:l=!1,hideFooter:s=!1,onChange:r}=e;const[d,c]=(0,a.useState)(null!==(t=(0,C.RO)(i))&&void 0!==t?t:[]),u=(0,a.useCallback)((e=>()=>{let t=[];c((n=>{let i=[...(0,w.cloneDeep)(n)];return i=i.filter((t=>t.id!==e)),t=i,i})),r(JSON.stringify(t))}),[]),h=(e=>[...e,{field:"actions",type:"actions",width:80,getActions:e=>[(0,T.jsx)(f.u,{icon:(0,T.jsx)(Z.Z,{}),label:"Delete",onClick:u(e.id)},"Delete")]}])(n),m=()=>{const e={};for(let n=0;n<h.length;n+=1){var t;e[null===(t=h[n])||void 0===t?void 0:t.field]=""}return e};return(0,T.jsxs)(T.Fragment,{children:[d&&h&&(0,T.jsx)("div",{style:{marginTop:10,height:210,width:"100%",...o},children:(0,T.jsx)(b._$,{processRowUpdate:e=>{let t=[];return c((n=>{let i=[...(0,w.cloneDeep)(n)];const a=i.findIndex((t=>t.id===e.id));return a>=0&&(i[a]={...e}),t=i,i})),r(JSON.stringify(t)),e},isCellEditable:()=>!l,hideFooter:s,onProcessRowUpdateError:e=>console.error(e),rows:d,columns:h})}),!l&&(0,T.jsx)(p.Z,{sx:{mt:1},variant:"outlined",onClick:()=>{c((e=>{let t=[...(0,w.cloneDeep)(e)];const n=t.length?t[t.length-1].id+1:1;return t.push({...m(),id:n}),t}))},startIcon:(0,T.jsx)(x.SC9,{}),children:"Add Item"})]})};var S=n(10571),P=n(83795),D=n(99177),E=n(30306),I=n(97251),A=n(73081),N=n(668),L=n(48588),M=n(15749),R=n(42558),F=n.n(R),B=n(48886),H=n(87130),O=n(91862),W=n(39491),z=n(52312),V=n(2383),G=n(88719),U=n(60990);const J=e=>{let{show:t,dialogProps:n,onCancel:i,onConfirm:l}=e;const r=document.getElementById("portal"),d=(0,s.Z)(),u=(0,o.I0)(),h=(0,o.v9)((e=>e.customization)),[m,x]=(0,a.useState)(""),[g,j]=(0,a.useState)(null),[v,y]=(0,a.useState)("json"),[f,b]=(0,a.useState)(!1),[Z,w]=(0,a.useState)(""),C=(0,U.Z)(G.Z.executeCustomFunctionNode);(0,a.useEffect)((()=>(n.value&&x(n.value),n.inputParam&&(j(n.inputParam),"code"===n.inputParam.type&&y("js")),()=>{x(""),b(!1),j(null),y("json"),w("")})),[n]),(0,a.useEffect)((()=>(u(t?{type:V.tS}:{type:V.Go}),()=>u({type:V.Go}))),[t,u]),(0,a.useEffect)((()=>{b(C.loading)}),[C.loading]),(0,a.useEffect)((()=>{C.data&&w(C.data)}),[C.data]),(0,a.useEffect)((()=>{var e,t,n,i;C.error&&("object"===typeof C.error&&null!==(e=C.error)&&void 0!==e&&null!==(t=e.response)&&void 0!==t&&t.data?w(null===(n=C.error)||void 0===n||null===(i=n.response)||void 0===i?void 0:i.data):"string"===typeof C.error&&w(C.error))}),[C.error]);const k=t?(0,T.jsxs)(B.Z,{open:t,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,T.jsxs)(H.Z,{children:[(0,T.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:g&&("string"===g.type||"code"===g.type)&&(0,T.jsxs)("div",{style:{flex:70},children:[(0,T.jsx)(c.Z,{sx:{mb:2,ml:1},variant:"h4",children:g.label}),(0,T.jsx)(F(),{style:{border:"1px solid",borderColor:d.palette.grey[500],borderRadius:"12px",height:"100%",maxHeight:"js"===v?"calc(100vh - 250px)":"calc(100vh - 220px)",overflowX:"hidden",backgroundColor:"white"},children:(0,T.jsx)(A.p,{disabled:n.disabled,value:m,height:"js"===v?"calc(100vh - 250px)":"calc(100vh - 220px)",theme:h.isDarkMode?"dark":"light",lang:v,placeholder:g.placeholder,basicSetup:"json"===v?{lineNumbers:!1,foldGutter:!1,autocompletion:!1,highlightActiveLine:!1}:{},onValueChange:e=>x(e)})})]})}),"js"===v&&(0,T.jsx)(W.Z,{sx:{mt:2,"&:hover":{backgroundColor:d.palette.secondary.main,backgroundImage:"linear-gradient(rgb(0 0 0/10%) 0 0)"},"&:disabled":{backgroundColor:d.palette.secondary.main,backgroundImage:"linear-gradient(rgb(0 0 0/50%) 0 0)"}},loading:f,variant:"contained",fullWidth:!0,color:"secondary",onClick:()=>{b(!0),C.request({javascriptFunction:m})},children:"Execute"}),Z&&(0,T.jsx)("div",{style:{marginTop:"15px"},children:(0,T.jsx)(A.p,{disabled:!0,value:Z,height:"max-content",theme:h.isDarkMode?"dark":"light",lang:"js",basicSetup:{lineNumbers:!1,foldGutter:!1,autocompletion:!1,highlightActiveLine:!1}})})]}),(0,T.jsxs)(O.Z,{children:[(0,T.jsx)(p.Z,{onClick:i,children:n.cancelButtonName}),(0,T.jsx)(z.S,{disabled:n.disabled,variant:"contained",onClick:()=>l(m,g.name),children:n.confirmButtonName})]})]}):null;return(0,M.createPortal)(k,r)};var _=n(38357);const q=e=>{let{show:t,dialogProps:n,onChange:i,onCancel:l}=e;const s=document.getElementById("portal"),r=(0,o.v9)((e=>e.customization)),d=(0,o.I0)();(0,a.useEffect)((()=>(d(t?{type:V.tS}:{type:V.Go}),()=>d({type:V.Go}))),[t,d]);const c=t?(0,T.jsxs)(B.Z,{onClose:l,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,T.jsx)(_.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:"Format Prompt Values"}),(0,T.jsx)(H.Z,{children:(0,T.jsx)(F(),{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:(0,T.jsx)(E._,{onChange:e=>i(e),value:n.value,isDarkMode:r.isDarkMode,inputParam:n.inputParam,nodes:n.nodes,edges:n.edges,nodeId:n.nodeId})})})]}):null;return(0,M.createPortal)(c,s)};var $=n(76387),Y=n(11021),X=n(17145),K=n(86294),Q=n(39410),ee=n(288),te=n(39494),ne=n(18510),ie=n(97120),ae=n(33656),oe=n(30857),le=n(14682),se=n(86008),re=n(25139),de=n(26754),ce=n(22994),pe=n(42846),ue=n(67888),he=n(33485),me=n(48598),xe=n(72002),ge=n(80928),je=n(17187),ve=n(23038),ye=n(28812),fe=n(44181),be=n(80598),Ze=n(62602);const we=n.p+"static/media/prompt_empty.a1ca2ca513d897311b06ef76ffa5b87a.svg";var Ce=n(23917);const Te=e=>Ce.Z.post("/prompts-list",e),ke=e=>Ce.Z.post("/load-prompt",e),Se=e=>{let{children:t=""}=e;return t.split("\n").reduce((function(e,t){return e.concat(t,(0,T.jsx)("br",{}))}),[])},Pe=(0,l.ZP)((e=>(0,T.jsx)(xe.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:t}=e;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),De=(0,l.ZP)((e=>(0,T.jsx)(ge.Z,{expandIcon:(0,T.jsx)(ye.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(180deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}})),Ee=(0,l.ZP)(je.Z)((e=>{let{theme:t}=e;return{padding:t.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),Ie=e=>{var t;let{promptType:n,show:i,onCancel:l,onSubmit:s}=e;const r=document.getElementById("portal"),h=(0,o.I0)(),m=(0,o.v9)((e=>e.customization)),x=(0,U.Z)(Te);(0,a.useEffect)((()=>(h(i?{type:V.tS}:{type:V.Go}),()=>h({type:V.Go}))),[i,h]),(0,a.useEffect)((()=>{n&&x.request({tags:"template"===n?"StringPromptTemplate&":"ChatPromptTemplate&"})}),[n]),(0,a.useEffect)((()=>{var e;x.data&&x.data.repos&&(C(x.data.repos),null!==(e=x.data.repos)&&void 0!==e&&e.length&&I(0,x.data.repos))}),[x.data]);const g={PaperProps:{style:{maxHeight:224,width:250}}},[j,v]=(0,a.useState)([]),[y,f]=(0,a.useState)([]),[b,Z]=(0,a.useState)([]),[w,C]=(0,a.useState)([]),[k,S]=(0,a.useState)({}),[P,D]=(0,a.useState)(["prompt"]),E=e=>(t,n)=>{const i=[...P];n?(i.push(e),D(i)):D(i.filter((t=>t!==e)))},I=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=t.length?t[e]:w[e];if(!n.detailed){const e=await ke({promptName:n.full_name});e.data&&(n.detailed=e.data.templates)}S(n)},A=e=>{let t=[];return e.forEach((n=>{1===e.filter((e=>e.id===n.id)).length&&t.push(n)})),t},N=i?(0,T.jsxs)(B.Z,{onClose:l,open:i,fullWidth:!0,maxWidth:"lg","aria-labelledby":"prompt-dialog-title","aria-describedby":"prompt-dialog-description",children:[(0,T.jsxs)(_.Z,{sx:{fontSize:"1rem"},id:"prompt-dialog-title",children:["Langchain Hub (","template"===n?"PromptTemplate":"ChatPromptTemplate",")"]}),(0,T.jsxs)(H.Z,{dividers:!0,sx:{p:1},children:[(0,T.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"row",p:2,pt:1,alignItems:"center"},children:[(0,T.jsxs)(te.Z,{sx:{mr:1,width:"30%"},children:[(0,T.jsx)(ne.Z,{size:"small",id:"model-checkbox-label",children:"Model"}),(0,T.jsx)(ie.Z,{id:"model-checkbox",labelId:"model-checkbox-label",multiple:!0,size:"small",value:j,onChange:e=>{const{target:{value:t}}=e;v(A(t))},input:(0,T.jsx)(ae.Z,{label:"Model"}),renderValue:e=>e.map((e=>e.name)).join(", "),endAdornment:!!j.length&&(0,T.jsx)(u.Z,{sx:{mr:2},onClick:()=>v([]),children:(0,T.jsx)(fe.Z,{style:{width:20,height:20}})}),sx:{".MuiSvgIcon-root ":{fill:m.isDarkMode?"white !important":""}},MenuProps:g,children:[{id:101,name:"anthropic:claude-instant-1"},{id:102,name:"anthropic:claude-instant-1.2"},{id:103,name:"anthropic:claude-2"},{id:104,name:"google:palm-2-chat-bison"},{id:105,name:"google:palm-2-codechat-bison"},{id:106,name:"google:palm-2-text-bison"},{id:107,name:"meta:llama-2-13b-chat"},{id:108,name:"meta:llama-2-70b-chat"},{id:109,name:"openai:gpt-3.5-turbo"},{id:110,name:"openai:gpt-4"},{id:111,name:"openai:text-davinci-003"}].map((e=>(0,T.jsxs)(oe.Z,{value:e,children:[(0,T.jsx)(le.Z,{id:e.id,checked:j.findIndex((t=>t.id===e.id))>=0}),(0,T.jsx)(se.Z,{primary:e.name})]},e.id)))})]}),(0,T.jsxs)(te.Z,{sx:{mr:1,width:"30%"},children:[(0,T.jsx)(ne.Z,{size:"small",id:"usecase-checkbox-label",children:"Usecase"}),(0,T.jsx)(ie.Z,{autoWidth:!1,labelId:"usecase-checkbox-label",id:"usecase-checkbox",multiple:!0,size:"small",value:y,onChange:e=>{const{target:{value:t}}=e;f(A(t))},input:(0,T.jsx)(ae.Z,{label:"Usecase"}),renderValue:e=>e.map((e=>e.name)).join(", "),endAdornment:!!y.length&&(0,T.jsx)(u.Z,{sx:{mr:2},onClick:()=>f([]),children:(0,T.jsx)(fe.Z,{style:{width:20,height:20}})}),sx:{".MuiSvgIcon-root ":{fill:m.isDarkMode?"white !important":""}},MenuProps:g,children:[{id:201,name:"Agents"},{id:202,name:"Agent Stimulation"},{id:203,name:"Autonomous agents"},{id:204,name:"Classification"},{id:205,name:"Chatbots"},{id:206,name:"Code understanding"},{id:207,name:"Code writing"},{id:208,name:"Evaluation"},{id:209,name:"Extraction"},{id:210,name:"Interacting with APIs"},{id:211,name:"Multi-modal"},{id:212,name:"QA over documents"},{id:213,name:"Self-checking"},{id:214,name:"SQL"},{id:215,name:"Summarization"},{id:216,name:"Tagging"}].map((e=>(0,T.jsxs)(oe.Z,{value:e,children:[(0,T.jsx)(le.Z,{id:e.id,checked:y.findIndex((t=>t.id===e.id))>=0}),(0,T.jsx)(se.Z,{primary:e.name})]},e.id)))})]}),(0,T.jsxs)(te.Z,{sx:{mr:1,width:"30%"},children:[(0,T.jsx)(ne.Z,{size:"small",id:"language-checkbox-label",children:"Language"}),(0,T.jsx)(ie.Z,{labelId:"language-checkbox-label",id:"language-checkbox",multiple:!0,size:"small",value:b,onChange:e=>{const{target:{value:t}}=e;Z(A(t))},input:(0,T.jsx)(ae.Z,{label:"language"}),renderValue:e=>e.map((e=>e.name)).join(", "),endAdornment:!!b.length&&(0,T.jsx)(u.Z,{sx:{mr:2},onClick:()=>Z([]),children:(0,T.jsx)(fe.Z,{style:{width:20,height:20}})}),sx:{".MuiSvgIcon-root ":{fill:m.isDarkMode?"white !important":""}},MenuProps:g,children:[{id:301,name:"Chinese"},{id:302,name:"English"},{id:303,name:"French"},{id:304,name:"German"},{id:305,name:"Russian"},{id:306,name:"Spanish"}].map((e=>(0,T.jsxs)(oe.Z,{value:e,children:[(0,T.jsx)(le.Z,{id:e.id,checked:b.findIndex((t=>t.id===e.id))>=0}),(0,T.jsx)(se.Z,{primary:e.name})]},e.id)))})]}),(0,T.jsx)(te.Z,{sx:{width:"10%"},children:(0,T.jsx)(p.Z,{disableElevation:!0,variant:"outlined",onClick:async()=>{let e="template"===n?"StringPromptTemplate&":"ChatPromptTemplate&";j.forEach((t=>{e+="tags=".concat(t.name,"&")})),y.forEach((t=>{e+="tags=".concat(t.name,"&")})),b.forEach((t=>{e+="tags=".concat(t.name,"&")})),x.request({tags:e})},children:"Search"})})]}),w&&0==w.length&&(0,T.jsxs)(re.Z,{sx:{alignItems:"center",justifyContent:"center",width:"100%",pb:3},flexDirection:"column",children:[(0,T.jsx)(d.Z,{sx:{p:5,height:"auto"},children:(0,T.jsx)("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:we,alt:"promptEmptySVG"})}),(0,T.jsx)("div",{children:"No Available Prompts"})]}),w&&w.length>0&&(0,T.jsx)(re.Z,{sx:{alignItems:"center",justifyContent:"center",width:"100%"},flexDirection:"column",children:(0,T.jsx)(d.Z,{sx:{width:"100%",p:2},children:(0,T.jsxs)(de.ZP,{xs:12,container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[(0,T.jsx)(de.ZP,{xs:4,item:!0,sx:{textAlign:"left"},children:(0,T.jsx)(d.Z,{sx:{width:"100%",maxWidth:360},children:(0,T.jsx)(ce.Z,{variant:"outlined",sx:{height:470,overflow:"auto",borderRadius:0},children:(0,T.jsxs)(pe.Z,{sx:{p:1},children:[(0,T.jsx)(c.Z,{sx:{fontSize:10},color:"text.secondary",gutterBottom:!0,children:"Available Prompts"}),(0,T.jsx)(ue.Z,{component:"nav","aria-label":"secondary mailbox folder",children:w.map(((e,t)=>(0,T.jsx)(he.Z,{selected:e.id===(null===k||void 0===k?void 0:k.id),onClick:()=>I(t),children:(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,T.jsx)(c.Z,{sx:{fontSize:16,p:1,fontWeight:500},children:e.full_name}),(0,T.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:5},children:e.tags.map(((e,t)=>(0,T.jsx)(me.Z,{label:e,style:{marginRight:5,marginBottom:5}},t)))})]})},e.id)))})]})})})}),(0,T.jsx)(de.ZP,{xs:8,item:!0,sx:{textAlign:"left"},children:(0,T.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,T.jsx)(ce.Z,{sx:{height:470,overflow:"auto"},children:(0,T.jsxs)(pe.Z,{sx:{p:.5},children:[(0,T.jsxs)(Pe,{expanded:P.includes("prompt"),onChange:E("prompt"),children:[(0,T.jsx)(De,{"aria-controls":"panel2d-content",expandIcon:(0,T.jsx)(ve.Z,{}),id:"panel2d-header",children:(0,T.jsx)(c.Z,{children:"Prompt"})}),(0,T.jsx)(Ee,{children:(0,T.jsx)(c.Z,{sx:{wordWrap:"true"},color:"text.primary",children:null===k||void 0===k||null===(t=k.detailed)||void 0===t?void 0:t.map((e=>(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(c.Z,{sx:{fontSize:12},color:"text.secondary",gutterBottom:!0,children:e.typeDisplay.toUpperCase()}),(0,T.jsx)(c.Z,{children:(0,T.jsx)("p",{style:{whiteSpace:"pre-wrap -moz-pre-wrap -pre-wrap -o-pre-wrap",wordWrap:"break-word",fontFamily:"inherit",wordSpacing:"0.1rem",lineHeight:"1.5rem"},children:(0,T.jsx)(Se,{children:e.template})})})]})))})})]}),(0,T.jsxs)(Pe,{expanded:P.includes("description"),onChange:E("description"),children:[(0,T.jsx)(De,{"aria-controls":"panel1d-content",expandIcon:(0,T.jsx)(ve.Z,{}),id:"panel1d-header",children:(0,T.jsx)(c.Z,{children:"Description"})}),(0,T.jsx)(Ee,{children:(0,T.jsx)(c.Z,{sx:{wordWrap:"true",wordSpacing:"0.1rem",lineHeight:"1.5rem"},color:"text.primary",children:null===k||void 0===k?void 0:k.description})})]}),(0,T.jsxs)(Pe,{expanded:P.includes("readme"),onChange:E("readme"),children:[(0,T.jsx)(De,{expandIcon:(0,T.jsx)(ve.Z,{}),"aria-controls":"panel3d-content",id:"panel3d-header",children:(0,T.jsx)(c.Z,{children:"Readme"})}),(0,T.jsx)(Ee,{children:(0,T.jsx)("div",{style:{lineHeight:1.75,"& a":{display:"block",marginRight:"2.5rem",wordWrap:"break-word",color:"#16bed7",fontWeight:500},"& a:hover":{opacity:.8},"& code":{color:"#0ab126",fontWeight:500,whiteSpace:"pre-wrap !important"}},children:(0,T.jsx)(be.s,{remarkPlugins:[Q.Z,ee.Z],rehypePlugins:[X.Z,K.Z],components:{code(e){let{inline:t,className:n,children:i,...a}=e;const o=/language-(\w+)/.exec(n||"");return t?(0,T.jsx)("code",{className:n,...a,children:i}):(0,T.jsx)(Ze.d,{isDialog:!0,language:o&&o[1]||"",value:String(i).replace(/\n$/,""),...a},Math.random())}},children:null===k||void 0===k?void 0:k.readme})})})]})]})})})})]})})})]}),w&&w.length>0&&(0,T.jsxs)(O.Z,{children:[(0,T.jsx)(p.Z,{onClick:l,children:"Cancel"}),(0,T.jsx)(z.S,{disabled:!(null!==k&&void 0!==k&&k.detailed),onClick:()=>s(k.detailed),variant:"contained",children:"Load"})]})]}):null;return(0,M.createPortal)(N,r)},Ae=["selectedTool","selectedAssistant"],Ne=(0,l.ZP)((e=>{let{className:t,...n}=e;return(0,T.jsx)(r.Z,{...n,classes:{popper:t}})}))({["& .".concat(m.Z.tooltip)]:{maxWidth:500}}),Le=e=>{var t,n,l,r,m,f,b,Z,w,M,R,F,B,H,O,W,z,V;let{inputAnchor:G,inputParam:U,data:_,disabled:X=!1,isAdditionalParams:K=!1}=e;const Q=(0,s.Z)(),ee=(0,o.v9)((e=>e.customization)),te=(0,a.useRef)(null),{reactFlowInstance:ne}=(0,a.useContext)(D.K),ie=(0,i.Bn)(),[ae,oe]=(0,a.useState)(0),[le,se]=(0,a.useState)(!1),[re,de]=(0,a.useState)({}),[ce,pe]=(0,a.useState)(""),[ue,he]=(0,a.useState)({}),[me,xe]=(0,a.useState)(Date.now().toString()),[ge,je]=(0,a.useState)(!1),[ve,ye]=(0,a.useState)({}),[fe,be]=(0,a.useState)(!1),Ze=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?(_.inputs[ce]=e,xe(Date.now().toString())):_.inputs[ce]="",he({}),pe("")};return(0,a.useEffect)((()=>{te.current&&te.current.offsetTop&&te.current.clientHeight&&(oe(te.current.offsetTop+te.current.clientHeight/2),ie(_.id))}),[_.id,te,ie]),(0,a.useEffect)((()=>{ie(_.id)}),[_.id,ae,ie]),(0,T.jsxs)("div",{ref:te,children:[G&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ne,{placement:"left",title:G.type,children:(0,T.jsx)(i.HH,{type:"target",position:i.Ly.Left,id:G.id,isValidConnection:e=>(0,C.st)(e,ne),style:{height:10,width:10,backgroundColor:_.selected?Q.palette.primary.main:Q.palette.text.secondary,top:ae}},G.id)}),(0,T.jsx)(d.Z,{sx:{p:2},children:(0,T.jsxs)(c.Z,{children:[G.label,!G.optional&&(0,T.jsx)("span",{style:{color:"red"},children:"\xa0*"}),G.description&&(0,T.jsx)(I.H,{style:{marginLeft:10},title:G.description})]})})]}),(U&&!U.additionalParams||K)&&(0,T.jsxs)(T.Fragment,{children:[U.acceptVariable&&(0,T.jsx)(Ne,{placement:"left",title:U.type,children:(0,T.jsx)(i.HH,{type:"target",position:i.Ly.Left,id:U.id,isValidConnection:e=>(0,C.st)(e,ne),style:{height:10,width:10,backgroundColor:_.selected?Q.palette.primary.main:Q.palette.text.secondary,top:ae}},U.id)}),(0,T.jsxs)(d.Z,{sx:{p:2},children:[("promptTemplate"===_.name||"chatPromptTemplate"===_.name)&&("template"===U.name||"systemMessagePrompt"===U.name)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(p.Z,{style:{display:"flex",flexDirection:"row",width:"100%"},disabled:X,sx:{borderRadius:25,width:"100%",mb:2,mt:0},variant:"outlined",onClick:()=>{be(!0)},endIcon:(0,T.jsx)(h.Z,{}),children:"Langchain Hub"}),(0,T.jsx)(Ie,{promptType:U.name,show:fe,onCancel:()=>be(!1),onSubmit:e=>{be(!1);for(const t of e)Object.prototype.hasOwnProperty.call(_.inputs,t.type)&&(_.inputs[t.type]=t.template)}})]}),(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,T.jsxs)(c.Z,{children:[U.label,!U.optional&&(0,T.jsx)("span",{style:{color:"red"},children:"\xa0*"}),U.description&&(0,T.jsx)(I.H,{style:{marginLeft:10},title:U.description})]}),(0,T.jsx)("div",{style:{flexGrow:1}}),("string"===U.type&&U.rows||"code"===U.type)&&(0,T.jsx)(u.Z,{size:"small",sx:{height:25,width:25},title:"Expand",color:"primary",onClick:()=>{var e,t;return((e,t)=>{de({value:e,inputParam:t,disabled:X,confirmButtonName:"Save",cancelButtonName:"Cancel"}),se(!0)})(null!==(e=null!==(t=_.inputs[U.name])&&void 0!==t?t:U.default)&&void 0!==e?e:"",U)},children:(0,T.jsx)(x.ybr,{})})]}),U.warning&&(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row",borderRadius:10,background:"rgb(254,252,191)",padding:10,marginTop:10,marginBottom:10},children:[(0,T.jsx)(x.DpU,{size:36,color:"orange"}),(0,T.jsx)("span",{style:{color:"rgb(116,66,16)",marginLeft:10},children:U.warning})]}),"credential"===U.type&&(0,T.jsx)($.Z,{disabled:X,data:_,inputParam:U,onSelect:e=>{_.credential=e,_.inputs[Y.J6]=e}}),"file"===U.type&&(0,T.jsx)(S.$,{disabled:X,fileType:U.fileType||"*",onChange:e=>_.inputs[U.name]=e,value:null!==(t=null!==(n=_.inputs[U.name])&&void 0!==n?n:U.default)&&void 0!==t?t:"Choose a file to upload"}),"boolean"===U.type&&(0,T.jsx)(P.D,{disabled:X,onChange:e=>_.inputs[U.name]=e,value:null!==(l=null!==(r=_.inputs[U.name])&&void 0!==r?r:U.default)&&void 0!==l&&l}),"datagrid"===U.type&&(0,T.jsx)(k,{disabled:X,columns:U.datagrid,hideFooter:!0,rows:null!==(m=null!==(f=_.inputs[U.name])&&void 0!==f?f:JSON.stringify(U.default))&&void 0!==m?m:[],onChange:e=>_.inputs[U.name]=e}),"code"===U.type&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{height:"5px"}}),(0,T.jsx)("div",{style:{height:U.rows?"100px":"200px"},children:(0,T.jsx)(A.p,{disabled:X,value:null!==(b=null!==(Z=_.inputs[U.name])&&void 0!==Z?Z:U.default)&&void 0!==b?b:"",height:U.rows?"100px":"200px",theme:ee.isDarkMode?"dark":"light",lang:"js",placeholder:U.placeholder,onValueChange:e=>_.inputs[U.name]=e,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1}})})]}),("string"===U.type||"password"===U.type||"number"===U.type)&&(0,T.jsx)(y.I,{disabled:X,inputParam:U,onChange:e=>_.inputs[U.name]=e,value:null!==(w=null!==(M=_.inputs[U.name])&&void 0!==M?M:U.default)&&void 0!==w?w:"",nodes:null!==U&&void 0!==U&&U.acceptVariable&&ne?ne.getNodes():[],edges:null!==U&&void 0!==U&&U.acceptVariable&&ne?ne.getEdges():[],nodeId:_.id},_.inputs[U.name]),"json"===U.type&&(0,T.jsxs)(T.Fragment,{children:[!(null!==U&&void 0!==U&&U.acceptVariable)&&(0,T.jsx)(E._,{disabled:X,onChange:e=>_.inputs[U.name]=e,value:null!==(R=null!==(F=_.inputs[U.name])&&void 0!==F?F:U.default)&&void 0!==R?R:"",isDarkMode:ee.isDarkMode}),(null===U||void 0===U?void 0:U.acceptVariable)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(p.Z,{sx:{borderRadius:25,width:"100%",mb:0,mt:2},variant:"outlined",disabled:X,onClick:()=>{var e;return((e,t)=>{let n=e;if("promptValues"===t.name&&!e){var i,a,o;const e={},t=(null!==(i=_.inputs.template)&&void 0!==i?i:"")+(null!==(a=_.inputs.systemMessagePrompt)&&void 0!==a?a:"")+(null!==(o=_.inputs.humanMessagePrompt)&&void 0!==o?o:""),l=(0,C.gj)(t);for(const n of l)e[n]="";Object.keys(e).length&&(n=JSON.stringify(e))}const l={value:n,inputParam:t,nodes:ne.getNodes(),edges:ne.getEdges(),nodeId:_.id};ye(l),je(!0)})(null!==(e=_.inputs[U.name])&&void 0!==e?e:"",U)},children:U.label}),(0,T.jsx)(q,{show:ge,dialogProps:ve,onCancel:()=>je(!1),onChange:e=>_.inputs[U.name]=e})]})]}),"options"===U.type&&(0,T.jsx)(g.L,{disabled:X,name:U.name,options:U.options,onSelect:e=>_.inputs[U.name]=e,value:null!==(B=null!==(H=_.inputs[U.name])&&void 0!==H?H:U.default)&&void 0!==B?B:"choose an option"}),"multiOptions"===U.type&&(0,T.jsx)(j.j,{disabled:X,name:U.name,options:U.options,onSelect:e=>_.inputs[U.name]=e,value:null!==(O=null!==(W=_.inputs[U.name])&&void 0!==W?W:U.default)&&void 0!==O?O:"choose an option"}),"asyncOptions"===U.type&&(0,T.jsxs)(T.Fragment,{children:[1===_.inputParams.length&&(0,T.jsx)("div",{style:{marginTop:10}}),(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,T.jsx)(v.O,{disabled:X,name:U.name,nodeData:_,value:null!==(z=null!==(V=_.inputs[U.name])&&void 0!==V?V:U.default)&&void 0!==z?z:"choose an option",isCreateNewOption:Ae.includes(U.name),onSelect:e=>_.inputs[U.name]=e,onCreateNew:()=>{return"selectedTool"===(e=U.name)?he({title:"Add New Tool",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}):"selectedAssistant"===e&&he({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),void pe(e);var e}}),Ae.includes(U.name)&&_.inputs[U.name]&&(0,T.jsx)(u.Z,{title:"Edit",color:"primary",size:"small",onClick:()=>{return e=U.name,t=_.inputs[U.name],"selectedTool"===e?he({title:"Edit Tool",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",toolId:t}):"selectedAssistant"===e&&he({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",assistantId:t}),void pe(e);var e,t},children:(0,T.jsx)(x.yl5,{})})]},me)]})]})]}),(0,T.jsx)(N.Z,{show:"selectedTool"===ce,dialogProps:ue,onCancel:()=>pe(""),onConfirm:Ze}),(0,T.jsx)(L.Z,{show:"selectedAssistant"===ce,dialogProps:ue,onCancel:()=>pe(""),onConfirm:Ze}),(0,T.jsx)(J,{show:le,dialogProps:re,onCancel:()=>se(!1),onConfirm:(e,t)=>((e,t)=>{se(!1),_.inputs[t]=e})(e,t)})]})}},22526:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(48428),a=n(30969),o=n(45971),l=n(94702),s=n(6779),r=n(43108),d=n(47915),c=n(2295),p=n(99177),u=n(86115),h=n(34061),m=n(37574);const x=(0,o.ZP)((e=>{let{className:t,...n}=e;return(0,m.jsx)(s.Z,{...n,classes:{popper:t}})}))({["& .".concat(c.Z.tooltip)]:{maxWidth:500}}),g=e=>{var t,n,o,s,c,g,j,v,y,f,b,Z,w,C,T,k,S,P;let{outputAnchor:D,data:E,disabled:I=!1}=e;const A=(0,l.Z)(),N=(0,a.useRef)(null),L=(0,i.Bn)(),[M,R]=(0,a.useState)(0),[F,B]=(0,a.useState)(null),{reactFlowInstance:H}=(0,a.useContext)(p.K);return(0,a.useEffect)((()=>{var e,t;N.current&&null!==(e=N.current)&&void 0!==e&&e.offsetTop&&null!==(t=N.current)&&void 0!==t&&t.clientHeight&&setTimeout((()=>{var e,t;R((null===(e=N.current)||void 0===e?void 0:e.offsetTop)+(null===(t=N.current)||void 0===t?void 0:t.clientHeight)/2),L(E.id)}),0)}),[E.id,N,L]),(0,a.useEffect)((()=>{setTimeout((()=>{L(E.id)}),0)}),[E.id,M,L]),(0,a.useEffect)((()=>{F&&setTimeout((()=>{L(E.id)}),0)}),[E.id,F,L]),(0,m.jsxs)("div",{ref:N,children:["options"!==D.type&&!D.options&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{placement:"right",title:D.type,children:(0,m.jsx)(i.HH,{type:"source",position:i.Ly.Right,id:D.id,isValidConnection:e=>(0,u.st)(e,H),style:{height:10,width:10,backgroundColor:E.selected?A.palette.primary.main:A.palette.text.secondary,top:M}},D.id)}),(0,m.jsx)(r.Z,{sx:{p:2,textAlign:"end"},children:(0,m.jsx)(d.Z,{children:D.label})})]}),"ifElseFunction"===E.name&&"options"===D.type&&D.options&&(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,m.jsx)(x,{placement:"right",title:null!==(t=null===(n=D.options.find((e=>{var t;return e.name===(null===(t=E.outputs)||void 0===t?void 0:t[D.name])})))||void 0===n?void 0:n.type)&&void 0!==t?t:D.type,children:(0,m.jsx)(i.HH,{type:"source",position:i.Ly.Right,id:null!==(c=null===(g=D.options.find((e=>"returnTrue"===e.name)))||void 0===g?void 0:g.id)&&void 0!==c?c:"",isValidConnection:e=>(0,u.st)(e,H),style:{height:10,width:10,backgroundColor:E.selected?A.palette.primary.main:A.palette.text.secondary,top:M-25}},null!==(o=null===(s=D.options.find((e=>"returnTrue"===e.name)))||void 0===s?void 0:s.id)&&void 0!==o?o:"")}),(0,m.jsx)("div",{style:{flex:1}}),(0,m.jsx)(r.Z,{sx:{p:2,textAlign:"end"},children:(0,m.jsx)(d.Z,{children:"True"})})]}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,m.jsx)(x,{placement:"right",title:null!==(j=null===(v=D.options.find((e=>{var t;return e.name===(null===(t=E.outputs)||void 0===t?void 0:t[D.name])})))||void 0===v?void 0:v.type)&&void 0!==j?j:D.type,children:(0,m.jsx)(i.HH,{type:"source",position:i.Ly.Right,id:null!==(b=null===(Z=D.options.find((e=>"returnFalse"===e.name)))||void 0===Z?void 0:Z.id)&&void 0!==b?b:"",isValidConnection:e=>(0,u.st)(e,H),style:{height:10,width:10,backgroundColor:E.selected?A.palette.primary.main:A.palette.text.secondary,top:M+25}},null!==(y=null===(f=D.options.find((e=>"returnFalse"===e.name)))||void 0===f?void 0:f.id)&&void 0!==y?y:"")}),(0,m.jsx)("div",{style:{flex:1}}),(0,m.jsx)(r.Z,{sx:{p:2,textAlign:"end"},children:(0,m.jsx)(d.Z,{children:"False"})})]})]}),"ifElseFunction"!==E.name&&"options"===D.type&&D.options&&D.options.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{placement:"right",title:null!==(w=null===(C=D.options.find((e=>{var t;return e.name===(null===(t=E.outputs)||void 0===t?void 0:t[D.name])})))||void 0===C?void 0:C.type)&&void 0!==w?w:D.type,children:(0,m.jsx)(i.HH,{type:"source",position:i.Ly.Right,id:null!==(T=null===(k=D.options.find((e=>{var t;return e.name===(null===(t=E.outputs)||void 0===t?void 0:t[D.name])})))||void 0===k?void 0:k.id)&&void 0!==T?T:"",isValidConnection:e=>(0,u.st)(e,H),style:{height:10,width:10,backgroundColor:E.selected?A.palette.primary.main:A.palette.text.secondary,top:M}})}),(0,m.jsx)(r.Z,{sx:{p:2,textAlign:"end"},children:(0,m.jsx)(h.L,{disabled:I,disableClearable:!0,name:D.name,options:D.options,onSelect:e=>{B(e),E.outputs[D.name]=e},value:null!==(S=null!==(P=E.outputs[D.name])&&void 0!==P?P:D.default)&&void 0!==S?S:"choose an option"})})]})]})}},668:(e,t,n)=>{n.d(t,{Z:()=>A});var i=n(15749),a=n(30969),o=n(69405),l=n(2383),s=n(50576),r=n(46138),d=n(48886),c=n(38357),p=n(87130),u=n(43108),h=n(25139),m=n(47915),x=n(33656),g=n(91862),j=n(52312),v=n(40894),y=n(49009),f=n(37574);const b=e=>{let{columns:t,rows:n,style:i,disabled:a=!1,onRowUpdate:o,addNewRow:l}=e;return(0,f.jsxs)(f.Fragment,{children:[!a&&(0,f.jsx)(r.Z,{variant:"outlined",onClick:l,startIcon:(0,f.jsx)(y.SC9,{}),children:"Add Item"}),n&&t&&(0,f.jsx)("div",{style:{marginTop:10,height:300,width:"100%",...i},children:(0,f.jsx)(v._$,{processRowUpdate:e=>(o(e),e),isCellEditable:()=>!a,onProcessRowUpdateError:e=>console.error(e),rows:n,columns:t})})]})};var Z=n(97251),w=n(44850),C=n(10814),T=n(48349),k=n(73081),S=n(74404),P=n(60806),D=n(60990),E=n(33926),I=n(86115);const A=e=>{let{show:t,dialogProps:n,onUseTemplate:v,onCancel:A,onConfirm:N}=e;const L=document.getElementById("portal"),M=(0,o.v9)((e=>e.customization)),R=(0,o.I0)();(0,E.Z)();const{confirm:F}=(0,P.Z)(),B=function(){return R((0,l.yv)(...arguments))},H=function(){return R((0,l.sy)(...arguments))},O=(0,D.Z)(S.Z.getSpecificTool),[W,z]=(0,a.useState)(""),[V,G]=(0,a.useState)(""),[U,J]=(0,a.useState)(""),[_,q]=(0,a.useState)(""),[$,Y]=(0,a.useState)([]),[X,K]=(0,a.useState)(""),Q=(0,a.useCallback)((e=>()=>{setTimeout((()=>{Y((t=>t.filter((t=>t.id!==e))))}))}),[]),ee=(0,a.useMemo)((()=>[{field:"property",headerName:"Property",editable:!0,flex:1},{field:"type",headerName:"Type",type:"singleSelect",valueOptions:["string","number","boolean","date"],editable:!0,width:120},{field:"description",headerName:"Description",editable:!0,flex:1},{field:"required",headerName:"Required",type:"boolean",editable:!0,width:80},{field:"actions",type:"actions",width:80,getActions:e=>[(0,f.jsx)(w.u,{icon:(0,f.jsx)(C.Z,{}),label:"Delete",onClick:Q(e.id)},"Delete")]}]),[Q]);(0,a.useEffect)((()=>(R(t?{type:l.tS}:{type:l.Go}),()=>R({type:l.Go}))),[t,R]),(0,a.useEffect)((()=>{O.data&&(z(O.data.id),G(O.data.name),J(O.data.description),Y((0,I.RO)(O.data.schema)),O.data.func?K(O.data.func):K(""))}),[O.data]),(0,a.useEffect)((()=>{"EDIT"===n.type&&n.data?(z(n.data.id),G(n.data.name),J(n.data.description),q(n.data.iconSrc),Y((0,I.RO)(n.data.schema)),n.data.func?K(n.data.func):K("")):"EDIT"===n.type&&n.toolId?O.request(n.toolId):"IMPORT"===n.type&&n.data||"TEMPLATE"===n.type&&n.data?(G(n.data.name),J(n.data.description),q(n.data.iconSrc),Y((0,I.RO)(n.data.schema)),n.data.func?K(n.data.func):K("")):"ADD"===n.type&&(z(""),G(""),J(""),q(""),Y([]),K(""))}),[n]);const te=t?(0,f.jsxs)(d.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:A,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,f.jsx)(c.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[n.title,(0,f.jsx)("div",{style:{flex:1}}),"EDIT"===n.type&&(0,f.jsx)(r.Z,{variant:"outlined",onClick:()=>(async()=>{try{const e=await S.Z.getSpecificTool(W);if(e.data){const t=e.data;delete t.id,delete t.createdDate,delete t.updatedDate;let n=JSON.stringify(t,null,2),i="data:application/json;charset=utf-8,"+encodeURIComponent(n),a="".concat(V,"-CustomTool.json"),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",a),o.click()}}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);B({message:"Failed to export Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,f.jsx)(r.Z,{style:{color:"white"},onClick:()=>H(e),children:(0,f.jsx)(y.kLi,{})})}}),A()}})(),startIcon:(0,f.jsx)(y.D57,{}),children:"Export"})]})}),(0,f.jsxs)(p.Z,{children:[(0,f.jsxs)(u.Z,{sx:{p:2},children:[(0,f.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,f.jsxs)(m.Z,{variant:"overline",children:["Tool Name",(0,f.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,f.jsx)(Z.H,{style:{marginLeft:10},title:"Tool name must be small capital letter with underscore. Ex: my_tool"})]})}),(0,f.jsx)(x.Z,{id:"toolName",type:"string",fullWidth:!0,disabled:"TEMPLATE"===n.type,placeholder:"My New Tool",value:V,name:"toolName",onChange:e=>G(e.target.value)})]}),(0,f.jsxs)(u.Z,{sx:{p:2},children:[(0,f.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,f.jsxs)(m.Z,{variant:"overline",children:["Tool description",(0,f.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,f.jsx)(Z.H,{style:{marginLeft:10},title:"Description of what the tool does. This is for ChatGPT to determine when to use this tool."})]})}),(0,f.jsx)(x.Z,{id:"toolDesc",type:"string",fullWidth:!0,disabled:"TEMPLATE"===n.type,placeholder:"Description of what the tool does. This is for ChatGPT to determine when to use this tool.",multiline:!0,rows:3,value:U,name:"toolDesc",onChange:e=>J(e.target.value)})]}),(0,f.jsxs)(u.Z,{sx:{p:2},children:[(0,f.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,f.jsx)(m.Z,{variant:"overline",children:"Tool Icon Src"})}),(0,f.jsx)(x.Z,{id:"toolIcon",type:"string",fullWidth:!0,disabled:"TEMPLATE"===n.type,placeholder:"https://raw.githubusercontent.com/gilbarbara/logos/main/logos/airtable.svg",value:_,name:"toolIcon",onChange:e=>q(e.target.value)})]}),(0,f.jsxs)(u.Z,{sx:{p:2},children:[(0,f.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,f.jsxs)(m.Z,{variant:"overline",children:["Output Schema",(0,f.jsx)(Z.H,{style:{marginLeft:10},title:"What should be the output response in JSON format?"})]})}),(0,f.jsx)(b,{columns:ee,rows:$,disabled:"TEMPLATE"===n.type,addNewRow:()=>{setTimeout((()=>{Y((e=>{let t=[...(0,s.cloneDeep)(e)];const n=t.length?t[t.length-1].id+1:1;return t.push({id:n,property:"",description:"",type:"",required:!1}),t}))}))},onRowUpdate:e=>{setTimeout((()=>{Y((t=>{let n=[...(0,s.cloneDeep)(t)];const i=n.findIndex((t=>t.id===e.id));return i>=0&&(n[i]={...e}),n}))}))}})]}),(0,f.jsxs)(u.Z,{sx:{p:2},children:[(0,f.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,f.jsxs)(m.Z,{variant:"overline",children:["Javascript Function",(0,f.jsx)(Z.H,{style:{marginLeft:10},title:'Function to execute when tool is being used. You can use properties specified in Output Schema as variables. For example, if the property is <code>userid</code>, you can use as <code>$userid</code>. Return value must be a string. You can also override the code from API by following this <a target="_blank" href="https://docs.flowiseai.com/tools/custom-tool#override-function-from-api">guide</a>'})]})}),"TEMPLATE"!==n.type&&(0,f.jsx)(r.Z,{style:{marginBottom:10},variant:"outlined",onClick:()=>K("/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Output Schema as variables. Ex: Property = userid, Variable = $userid\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}"),children:"See Example"}),(0,f.jsx)(k.p,{disabled:"TEMPLATE"===n.type,value:X,height:"calc(100vh - 220px)",theme:M.isDarkMode?"dark":"light",lang:"js",onValueChange:e=>K(e)})]})]}),(0,f.jsxs)(g.Z,{children:["EDIT"===n.type&&(0,f.jsx)(j.S,{color:"error",variant:"contained",onClick:()=>(async()=>{const e={title:"Delete Tool",description:"Delete tool ".concat(V,"?"),confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await F(e))try{(await S.Z.deleteTool(W)).data&&(B({message:"Tool deleted",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,f.jsx)(r.Z,{style:{color:"white"},onClick:()=>H(e),children:(0,f.jsx)(y.kLi,{})})}}),N())}catch(t){const e=t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText);B({message:"Failed to delete Tool: ".concat(e),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,f.jsx)(r.Z,{style:{color:"white"},onClick:()=>H(e),children:(0,f.jsx)(y.kLi,{})})}}),A()}})(),children:"Delete"}),"TEMPLATE"===n.type&&(0,f.jsx)(j.S,{color:"secondary",variant:"contained",onClick:()=>{v(n.data)},children:"Use Template"}),"TEMPLATE"!==n.type&&(0,f.jsx)(j.S,{disabled:!(V&&U),variant:"contained",onClick:()=>"ADD"===n.type||"IMPORT"===n.type?(async()=>{try{const e={name:V,description:U,color:(0,I.xl)(),schema:JSON.stringify($),func:X,iconSrc:_},t=await S.Z.createNewTool(e);t.data&&(B({message:"New Tool added",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,f.jsx)(r.Z,{style:{color:"white"},onClick:()=>H(e),children:(0,f.jsx)(y.kLi,{})})}}),N(t.data.id))}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);B({message:"Failed to add new Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,f.jsx)(r.Z,{style:{color:"white"},onClick:()=>H(e),children:(0,f.jsx)(y.kLi,{})})}}),A()}})():(async()=>{try{const e=await S.Z.updateTool(W,{name:V,description:U,schema:JSON.stringify($),func:X,iconSrc:_});e.data&&(B({message:"Tool saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,f.jsx)(r.Z,{style:{color:"white"},onClick:()=>H(e),children:(0,f.jsx)(y.kLi,{})})}}),N(e.data.id))}catch(e){console.error(e);const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);B({message:"Failed to save Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,f.jsx)(r.Z,{style:{color:"white"},onClick:()=>H(e),children:(0,f.jsx)(y.kLi,{})})}}),A()}})(),children:n.confirmButtonName})]}),(0,f.jsx)(T.Z,{})]}):null;return(0,i.createPortal)(te,L)}},86420:()=>{}}]);
//# sourceMappingURL=8245.cf1b9fe5.chunk.js.map