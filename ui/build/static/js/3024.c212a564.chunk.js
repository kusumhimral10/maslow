"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[3024],{74404:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(23917);const n={getAllTools:()=>o.Z.get("/tools"),getSpecificTool:e=>o.Z.get("/tools/".concat(e)),createNewTool:e=>o.Z.post("/tools",e),updateTool:(e,t)=>o.Z.put("/tools/".concat(e),t),deleteTool:e=>o.Z.delete("/tools/".concat(e))}},73081:(e,t,a)=>{a.d(t,{p:()=>d});var o=a(89089),n=a(45317),s=a(64139),i=a(32604),r=a(13195),l=a(87038),c=a(37574);const d=e=>{let{value:t,height:a,theme:d,lang:h,placeholder:p,disabled:u=!1,basicSetup:m={},onValueChange:x}=e;const g=l.tk.baseTheme({"&":{color:"#191b1f",padding:"10px"},".cm-placeholder":{color:"rgba(120, 120, 120, 0.5)"}});return(0,c.jsx)(o.ZP,{placeholder:p,value:t,height:null!==a&&void 0!==a?a:"calc(100vh - 220px)",theme:"dark"===d?"js"===h?i.Pc:r.CP:"none",extensions:"js"===h?[(0,n.eJ)({jsx:!0}),l.tk.lineWrapping,g]:[(0,s.AV)(),l.tk.lineWrapping,g],onChange:x,readOnly:u,editable:!u,basicSetup:m})}},97251:(e,t,a)=>{a.d(t,{H:()=>c});var o=a(46705),n=a(6779),s=a(91243),i=a(12011),r=a(69405),l=a(37574);const c=e=>{let{title:t,style:a}=e;const c=(0,r.v9)((e=>e.customization));return(0,l.jsx)(n.Z,{title:(0,i.ZP)(t),placement:"right",children:(0,l.jsx)(s.Z,{sx:{height:15,width:15},children:(0,l.jsx)(o.Z,{style:{...a,background:"transparent",color:c.isDarkMode?"white":"inherit",height:15,width:15}})})})}},53024:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var o=a(30969),n=a(13026),s=a(69405),i=a(43108),r=a(25139),l=a(47915),c=a(73447),d=a(8288),h=a(26754),p=a(78744),u=a(94702),m=a(49009),x=a(55705),g=a(24326),f=a(11021),j=a(55303),y=a(668),v=a(23917);const T=()=>v.Z.get("/marketplaces/chatflows"),Z=()=>v.Z.get("/marketplaces/tools");var w=a(60990),b=a(66798),k=a(37574);function C(e){const{children:t,value:a,index:o,...n}=e;return(0,k.jsx)("div",{role:"tabpanel",hidden:a!==o,id:"attachment-tabpanel-".concat(o),"aria-labelledby":"attachment-tab-".concat(o),...n,children:a===o&&(0,k.jsx)(i.Z,{sx:{p:1},children:t})})}const E=(0,b.u3)((()=>{const e=(0,n.s0)(),t=(0,u.Z)(),a=(0,s.v9)((e=>e.customization)),[v,b]=(0,o.useState)(!0),[E,S]=(0,o.useState)(!0),[D,P]=(0,o.useState)({}),M=["Chatflows","Tools"],[N,A]=(0,o.useState)(0),[L,I]=(0,o.useState)(!1),[O,R]=(0,o.useState)({}),F=(0,w.Z)(T),W=(0,w.Z)(Z),U=e=>{const t={title:e.templateName,type:"TEMPLATE",data:e};R(t),I(!0)},B=t=>{e("/marketplace/".concat(t.id),{state:t})};return(0,o.useEffect)((()=>{F.request(),W.request()}),[]),(0,o.useEffect)((()=>{b(F.loading)}),[F.loading]),(0,o.useEffect)((()=>{S(W.loading)}),[W.loading]),(0,o.useEffect)((()=>{if(F.data)try{const e=F.data,t={};for(let a=0;a<e.length;a+=1){const o=e[a].flowData,n=JSON.parse(o).nodes||[];t[e[a].id]=[];for(let s=0;s<n.length;s+=1){const o="".concat(f.v2,"/api/v1/node-icon/").concat(n[s].data.name);t[e[a].id].includes(o)||t[e[a].id].push(o)}}P(t)}catch(e){console.error(e)}}),[F.data]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(x.Z,{sx:{background:a.isDarkMode?t.palette.common.black:""},children:[(0,k.jsx)(r.Z,{flexDirection:"row",children:(0,k.jsx)(l.Z,{variant:"h1",children:"Marketplace"})}),(0,k.jsx)(c.Z,{sx:{mb:2},variant:"fullWidth",value:N,onChange:(e,t)=>{A(t)},"aria-label":"tabs",children:M.map(((e,t)=>(0,k.jsx)(d.Z,{icon:0===t?(0,k.jsx)(m.Mv4,{}):(0,k.jsx)(m.cKW,{}),iconPosition:"start",label:(0,k.jsx)("span",{style:{fontSize:"1.1rem"},children:e})},t)))}),M.map(((e,t)=>(0,k.jsxs)(C,{value:N,index:t,children:["Chatflows"===e&&(0,k.jsx)(h.ZP,{container:!0,spacing:f.dv,children:!v&&F.data&&F.data.map(((e,t)=>(0,k.jsxs)(h.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,children:[e.badge&&(0,k.jsx)(p.Z,{sx:{"& .MuiBadge-badge":{right:20}},badgeContent:e.badge,color:"POPULAR"===e.badge?"primary":"error",children:(0,k.jsx)(g.Z,{onClick:()=>B(e),data:e,images:D[e.id]})}),!e.badge&&(0,k.jsx)(g.Z,{onClick:()=>B(e),data:e,images:D[e.id]})]},t)))}),"Tools"===e&&(0,k.jsx)(h.ZP,{container:!0,spacing:f.dv,children:!E&&W.data&&W.data.map(((e,t)=>(0,k.jsxs)(h.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,children:[e.badge&&(0,k.jsx)(p.Z,{sx:{"& .MuiBadge-badge":{right:20}},badgeContent:e.badge,color:"POPULAR"===e.badge?"primary":"error",children:(0,k.jsx)(g.Z,{data:e,onClick:()=>U(e)})}),!e.badge&&(0,k.jsx)(g.Z,{data:e,onClick:()=>U(e)})]},t)))})]},t))),(!v&&(!F.data||0===F.data.length)||!E&&(!W.data||0===W.data.length))&&(0,k.jsxs)(r.Z,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[(0,k.jsx)(i.Z,{sx:{p:2,height:"auto"},children:(0,k.jsx)("img",{style:{objectFit:"cover",height:"30vh",width:"auto"},src:j.Z,alt:"WorkflowEmptySVG"})}),(0,k.jsx)("div",{children:"No Marketplace Yet"})]})]}),(0,k.jsx)(y.Z,{show:L,dialogProps:O,onCancel:()=>I(!1),onConfirm:()=>I(!1),onUseTemplate:e=>(R({title:"Add New Tool",type:"IMPORT",cancelButtonName:"Cancel",confirmButtonName:"Add",data:e}),void I(!0))})]})}))},668:(e,t,a)=>{a.d(t,{Z:()=>N});var o=a(15749),n=a(30969),s=a(69405),i=a(2383),r=a(50576),l=a(46138),c=a(48886),d=a(38357),h=a(87130),p=a(43108),u=a(25139),m=a(47915),x=a(33656),g=a(91862),f=a(52312),j=a(40894),y=a(49009),v=a(37574);const T=e=>{let{columns:t,rows:a,style:o,disabled:n=!1,onRowUpdate:s,addNewRow:i}=e;return(0,v.jsxs)(v.Fragment,{children:[!n&&(0,v.jsx)(l.Z,{variant:"outlined",onClick:i,startIcon:(0,v.jsx)(y.SC9,{}),children:"Add Item"}),a&&t&&(0,v.jsx)("div",{style:{marginTop:10,height:300,width:"100%",...o},children:(0,v.jsx)(j._$,{processRowUpdate:e=>(s(e),e),isCellEditable:()=>!n,onProcessRowUpdateError:e=>console.error(e),rows:a,columns:t})})]})};var Z=a(97251),w=a(44850),b=a(10814),k=a(48349),C=a(73081),E=a(74404),S=a(60806),D=a(60990),P=a(33926),M=a(86115);const N=e=>{let{show:t,dialogProps:a,onUseTemplate:j,onCancel:N,onConfirm:A}=e;const L=document.getElementById("portal"),I=(0,s.v9)((e=>e.customization)),O=(0,s.I0)();(0,P.Z)();const{confirm:R}=(0,S.Z)(),F=function(){return O((0,i.yv)(...arguments))},W=function(){return O((0,i.sy)(...arguments))},U=(0,D.Z)(E.Z.getSpecificTool),[B,q]=(0,n.useState)(""),[J,G]=(0,n.useState)(""),[_,z]=(0,n.useState)(""),[H,V]=(0,n.useState)(""),[Y,$]=(0,n.useState)([]),[K,Q]=(0,n.useState)(""),X=(0,n.useCallback)((e=>()=>{setTimeout((()=>{$((t=>t.filter((t=>t.id!==e))))}))}),[]),ee=(0,n.useMemo)((()=>[{field:"property",headerName:"Property",editable:!0,flex:1},{field:"type",headerName:"Type",type:"singleSelect",valueOptions:["string","number","boolean","date"],editable:!0,width:120},{field:"description",headerName:"Description",editable:!0,flex:1},{field:"required",headerName:"Required",type:"boolean",editable:!0,width:80},{field:"actions",type:"actions",width:80,getActions:e=>[(0,v.jsx)(w.u,{icon:(0,v.jsx)(b.Z,{}),label:"Delete",onClick:X(e.id)},"Delete")]}]),[X]);(0,n.useEffect)((()=>(O(t?{type:i.tS}:{type:i.Go}),()=>O({type:i.Go}))),[t,O]),(0,n.useEffect)((()=>{U.data&&(q(U.data.id),G(U.data.name),z(U.data.description),$((0,M.RO)(U.data.schema)),U.data.func?Q(U.data.func):Q(""))}),[U.data]),(0,n.useEffect)((()=>{"EDIT"===a.type&&a.data?(q(a.data.id),G(a.data.name),z(a.data.description),V(a.data.iconSrc),$((0,M.RO)(a.data.schema)),a.data.func?Q(a.data.func):Q("")):"EDIT"===a.type&&a.toolId?U.request(a.toolId):"IMPORT"===a.type&&a.data||"TEMPLATE"===a.type&&a.data?(G(a.data.name),z(a.data.description),V(a.data.iconSrc),$((0,M.RO)(a.data.schema)),a.data.func?Q(a.data.func):Q("")):"ADD"===a.type&&(q(""),G(""),z(""),V(""),$([]),Q(""))}),[a]);const te=t?(0,v.jsxs)(c.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:N,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,v.jsx)(d.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[a.title,(0,v.jsx)("div",{style:{flex:1}}),"EDIT"===a.type&&(0,v.jsx)(l.Z,{variant:"outlined",onClick:()=>(async()=>{try{const e=await E.Z.getSpecificTool(B);if(e.data){const t=e.data;delete t.id,delete t.createdDate,delete t.updatedDate;let a=JSON.stringify(t,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(a),n="".concat(J,"-CustomTool.json"),s=document.createElement("a");s.setAttribute("href",o),s.setAttribute("download",n),s.click()}}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);F({message:"Failed to export Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,v.jsx)(l.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,v.jsx)(y.kLi,{})})}}),N()}})(),startIcon:(0,v.jsx)(y.D57,{}),children:"Export"})]})}),(0,v.jsxs)(h.Z,{children:[(0,v.jsxs)(p.Z,{sx:{p:2},children:[(0,v.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,v.jsxs)(m.Z,{variant:"overline",children:["Tool Name",(0,v.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,v.jsx)(Z.H,{style:{marginLeft:10},title:"Tool name must be small capital letter with underscore. Ex: my_tool"})]})}),(0,v.jsx)(x.Z,{id:"toolName",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"My New Tool",value:J,name:"toolName",onChange:e=>G(e.target.value)})]}),(0,v.jsxs)(p.Z,{sx:{p:2},children:[(0,v.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,v.jsxs)(m.Z,{variant:"overline",children:["Tool description",(0,v.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,v.jsx)(Z.H,{style:{marginLeft:10},title:"Description of what the tool does. This is for ChatGPT to determine when to use this tool."})]})}),(0,v.jsx)(x.Z,{id:"toolDesc",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"Description of what the tool does. This is for ChatGPT to determine when to use this tool.",multiline:!0,rows:3,value:_,name:"toolDesc",onChange:e=>z(e.target.value)})]}),(0,v.jsxs)(p.Z,{sx:{p:2},children:[(0,v.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,v.jsx)(m.Z,{variant:"overline",children:"Tool Icon Src"})}),(0,v.jsx)(x.Z,{id:"toolIcon",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"https://raw.githubusercontent.com/gilbarbara/logos/main/logos/airtable.svg",value:H,name:"toolIcon",onChange:e=>V(e.target.value)})]}),(0,v.jsxs)(p.Z,{sx:{p:2},children:[(0,v.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,v.jsxs)(m.Z,{variant:"overline",children:["Output Schema",(0,v.jsx)(Z.H,{style:{marginLeft:10},title:"What should be the output response in JSON format?"})]})}),(0,v.jsx)(T,{columns:ee,rows:Y,disabled:"TEMPLATE"===a.type,addNewRow:()=>{setTimeout((()=>{$((e=>{let t=[...(0,r.cloneDeep)(e)];const a=t.length?t[t.length-1].id+1:1;return t.push({id:a,property:"",description:"",type:"",required:!1}),t}))}))},onRowUpdate:e=>{setTimeout((()=>{$((t=>{let a=[...(0,r.cloneDeep)(t)];const o=a.findIndex((t=>t.id===e.id));return o>=0&&(a[o]={...e}),a}))}))}})]}),(0,v.jsxs)(p.Z,{sx:{p:2},children:[(0,v.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,v.jsxs)(m.Z,{variant:"overline",children:["Javascript Function",(0,v.jsx)(Z.H,{style:{marginLeft:10},title:'Function to execute when tool is being used. You can use properties specified in Output Schema as variables. For example, if the property is <code>userid</code>, you can use as <code>$userid</code>. Return value must be a string. You can also override the code from API by following this <a target="_blank" href="https://docs.flowiseai.com/tools/custom-tool#override-function-from-api">guide</a>'})]})}),"TEMPLATE"!==a.type&&(0,v.jsx)(l.Z,{style:{marginBottom:10},variant:"outlined",onClick:()=>Q("/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Output Schema as variables. Ex: Property = userid, Variable = $userid\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}"),children:"See Example"}),(0,v.jsx)(C.p,{disabled:"TEMPLATE"===a.type,value:K,height:"calc(100vh - 220px)",theme:I.isDarkMode?"dark":"light",lang:"js",onValueChange:e=>Q(e)})]})]}),(0,v.jsxs)(g.Z,{children:["EDIT"===a.type&&(0,v.jsx)(f.S,{color:"error",variant:"contained",onClick:()=>(async()=>{const e={title:"Delete Tool",description:"Delete tool ".concat(J,"?"),confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await R(e))try{(await E.Z.deleteTool(B)).data&&(F({message:"Tool deleted",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,v.jsx)(l.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,v.jsx)(y.kLi,{})})}}),A())}catch(t){const e=t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText);F({message:"Failed to delete Tool: ".concat(e),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,v.jsx)(l.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,v.jsx)(y.kLi,{})})}}),N()}})(),children:"Delete"}),"TEMPLATE"===a.type&&(0,v.jsx)(f.S,{color:"secondary",variant:"contained",onClick:()=>{j(a.data)},children:"Use Template"}),"TEMPLATE"!==a.type&&(0,v.jsx)(f.S,{disabled:!(J&&_),variant:"contained",onClick:()=>"ADD"===a.type||"IMPORT"===a.type?(async()=>{try{const e={name:J,description:_,color:(0,M.xl)(),schema:JSON.stringify(Y),func:K,iconSrc:H},t=await E.Z.createNewTool(e);t.data&&(F({message:"New Tool added",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,v.jsx)(l.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,v.jsx)(y.kLi,{})})}}),A(t.data.id))}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);F({message:"Failed to add new Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,v.jsx)(l.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,v.jsx)(y.kLi,{})})}}),N()}})():(async()=>{try{const e=await E.Z.updateTool(B,{name:J,description:_,schema:JSON.stringify(Y),func:K,iconSrc:H});e.data&&(F({message:"Tool saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,v.jsx)(l.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,v.jsx)(y.kLi,{})})}}),A(e.data.id))}catch(e){console.error(e);const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);F({message:"Failed to save Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,v.jsx)(l.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,v.jsx)(y.kLi,{})})}}),N()}})(),children:a.confirmButtonName})]}),(0,v.jsx)(k.Z,{})]}):null;return(0,o.createPortal)(te,L)}}}]);
//# sourceMappingURL=3024.c212a564.chunk.js.map